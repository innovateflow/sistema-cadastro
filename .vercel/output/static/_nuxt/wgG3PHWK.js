import{_ as $}from"./CP_9KE0U.js";import{r as c,e as U,f as L,u as T,c as d,o as u,a as e,d as n,t,g as o,h as x,b as y,w as C,n as D,F as E,i as I,j as K}from"./71iuM9A_.js";const P={class:"bg-gray-50 min-h-screen"},R={class:"container mx-auto px-4 py-8"},V={class:"bg-white rounded-lg shadow p-6"},A={class:"mb-6"},B={class:"bg-gray-100 p-4 rounded"},F={class:"mb-6"},j={class:"bg-gray-100 p-4 rounded"},z={key:0},H={class:"mb-6"},M={class:"space-y-2"},q={class:"mb-6"},G=["disabled"],J={class:"mb-6"},O={class:"bg-black text-green-400 p-4 rounded font-mono text-sm h-32 overflow-y-auto"},Y={__name:"debug",setup(Q){const b=U(),S=!0,_=!1,w=!1,g=c(!1),r=c(null),f=c([]),p=!!b.public.supabaseUrl,m=!!b.public.supabaseKey,v=b.public.supabaseUrl?`${b.public.supabaseUrl.slice(0,20)}...`:null,a=l=>{const s=new Date().toLocaleTimeString();f.value.push(`[${s}] ${l}`)},N=async()=>{g.value=!0,r.value=null;try{if(a("Iniciando teste de conexão..."),!p||!m)throw new Error("Credenciais do Supabase não configuradas");const{$supabase:l}=K();a("Cliente Supabase obtido");const{data:s,error:i}=await l.from("funcionarios").select("count(*)").limit(1);if(i)throw i;a("Conexão com Supabase bem-sucedida"),r.value={success:!0,message:"Conexão com Supabase funcionando! ✅"}}catch(l){a(`Erro: ${l.message}`),r.value={success:!1,message:`Erro na conexão: ${l.message}`}}finally{g.value=!1}};return L(()=>{a("Página de debug carregada"),a("Ambiente: Cliente"),a(`Supabase URL: ${p?"Configurada":"Não configurada"}`),a(`Supabase Key: ${m?"Configurada":"Não configurada"}`)}),T({title:"Debug - Sistema Cadastro"}),(l,s)=>{const i=$;return u(),d("div",P,[e("div",R,[e("div",V,[s[13]||(s[13]=e("h1",{class:"text-2xl font-bold mb-6"},"Debug do Sistema",-1)),e("div",A,[s[3]||(s[3]=e("h2",{class:"text-lg font-semibold mb-3"},"Informações do Ambiente",-1)),e("div",B,[e("p",null,[s[0]||(s[0]=e("strong",null,"Cliente:",-1)),n(" "+t(o(S)?"Sim":"Não"),1)]),e("p",null,[s[1]||(s[1]=e("strong",null,"Servidor:",-1)),n(" "+t(o(_)?"Sim":"Não"),1)]),e("p",null,[s[2]||(s[2]=e("strong",null,"Desenvolvimento:",-1)),n(" "+t(o(w)?"Sim":"Não"),1)])])]),e("div",F,[s[7]||(s[7]=e("h2",{class:"text-lg font-semibold mb-3"},"Configurações do Supabase",-1)),e("div",j,[e("p",null,[s[4]||(s[4]=e("strong",null,"URL configurada:",-1)),n(" "+t(p?"Sim":"Não"),1)]),e("p",null,[s[5]||(s[5]=e("strong",null,"Key configurada:",-1)),n(" "+t(m?"Sim":"Não"),1)]),o(v)?(u(),d("p",z,[s[6]||(s[6]=e("strong",null,"URL Preview:",-1)),n(" "+t(o(v)),1)])):x("",!0)])]),e("div",H,[s[10]||(s[10]=e("h2",{class:"text-lg font-semibold mb-3"},"Teste de Navegação",-1)),e("div",M,[y(i,{to:"/",class:"block px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"},{default:C(()=>[...s[8]||(s[8]=[n(" Ir para Página Inicial ",-1)])]),_:1}),y(i,{to:"/novocadastro",class:"block px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600"},{default:C(()=>[...s[9]||(s[9]=[n(" Ir para Novo Cadastro ",-1)])]),_:1})])]),e("div",q,[s[11]||(s[11]=e("h2",{class:"text-lg font-semibold mb-3"},"Teste de Conexão",-1)),e("button",{onClick:N,disabled:o(g),class:"px-4 py-2 bg-purple-500 text-white rounded hover:bg-purple-600 disabled:opacity-50"},t(o(g)?"Testando...":"Testar Conexão Supabase"),9,G),o(r)?(u(),d("div",{key:0,class:D(["mt-3 p-3 rounded",o(r).success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},t(o(r).message),3)):x("",!0)]),e("div",J,[s[12]||(s[12]=e("h2",{class:"text-lg font-semibold mb-3"},"Console de Erros",-1)),e("div",O,[(u(!0),d(E,null,I(o(f),(h,k)=>(u(),d("div",{key:k},t(h),1))),128))])])])])])}}};export{Y as default};
