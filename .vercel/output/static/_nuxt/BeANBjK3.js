import{_ as O}from"./CP_9KE0U.js";import{_ as U,k,f as I,l as q,m as B,o as i,b as w,w as S,c as r,h as y,a as e,T,p as D,n as M,g as c,q as K,t as u,s as z,d as b,v as P,x as v,j as R,e as G,y as J,r as j,z as V,F as Q,i as W,A as X,u as Y}from"./71iuM9A_.js";import{u as Z,a as ee}from"./Zb9bAkV2.js";import{u as te}from"./DHwmbQvi.js";import"./-LzsfN83.js";const se={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},oe={class:"sm:flex sm:items-start"},ne={class:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left w-full"},ae={key:0,class:"text-base font-semibold leading-6 text-gray-900",id:"modal-title"},ie={class:"mt-2"},re={key:0,class:"text-sm text-gray-500"},le={class:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse sm:gap-3"},ce=["disabled"],de={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ue=["disabled"],me={__name:"Modal",props:{modelValue:{type:Boolean,default:!1},title:{type:String,default:""},message:{type:String,default:""},icon:{type:[String,Object],default:null},type:{type:String,default:"info",validator:s=>["info","success","warning","danger"].includes(s)},showConfirm:{type:Boolean,default:!0},showCancel:{type:Boolean,default:!0},confirmText:{type:String,default:"Confirmar"},cancelText:{type:String,default:"Cancelar"},loading:{type:Boolean,default:!1},loadingText:{type:String,default:"Processando..."},closeOnOverlay:{type:Boolean,default:!0}},emits:["update:modelValue","confirm","cancel","close"],setup(s,{emit:p}){const l=s,n=p,g=k(()=>{const a={info:"bg-blue-100",success:"bg-green-100",warning:"bg-yellow-100",danger:"bg-red-100"};return a[l.type]||a.info}),d=k(()=>{const a={info:"text-blue-600",success:"text-green-600",warning:"text-yellow-600",danger:"text-red-600"};return a[l.type]||a.info}),C=k(()=>{const a={info:"bg-blue-600 hover:bg-blue-500 focus-visible:outline-blue-600",success:"bg-green-600 hover:bg-green-500 focus-visible:outline-green-600",warning:"bg-yellow-600 hover:bg-yellow-500 focus-visible:outline-yellow-600",danger:"bg-red-600 hover:bg-red-500 focus-visible:outline-red-600"};return`${a[l.type]||a.info} ${l.loading?"opacity-75 cursor-not-allowed":""}`}),_=()=>{l.closeOnOverlay&&!l.loading&&(n("update:modelValue",!1),n("close"))};I(()=>{const a=o=>{o.key==="Escape"&&l.modelValue&&!l.loading&&(n("update:modelValue",!1),n("close"))};document.addEventListener("keydown",a),q(()=>{document.removeEventListener("keydown",a)})});const h={info:"InformationCircleIcon",success:"CheckCircleIcon",warning:"ExclamationTriangleIcon",danger:"ExclamationTriangleIcon"};return k(()=>{if(l.icon)return l.icon;const a=h[l.type],o={InformationCircleIcon:()=>v("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),CheckCircleIcon:()=>v("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),ExclamationTriangleIcon:()=>v("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})])};return o[a]||o.InformationCircleIcon}),(a,o)=>(i(),B(P,{to:"body"},[w(T,{"enter-active-class":"duration-300 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:S(()=>[s.modelValue?(i(),r("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:_},[o[4]||(o[4]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",se,[w(T,{"enter-active-class":"duration-300 ease-out","enter-from-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to-class":"opacity-100 translate-y-0 sm:scale-100","leave-active-class":"duration-200 ease-in","leave-from-class":"opacity-100 translate-y-0 sm:scale-100","leave-to-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:S(()=>[s.modelValue?(i(),r("div",{key:0,class:"relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6",onClick:o[2]||(o[2]=D(()=>{},["stop"]))},[e("div",oe,[s.icon?(i(),r("div",{key:0,class:M(["mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full sm:mx-0 sm:h-10 sm:w-10",c(g)])},[(i(),B(K(s.icon),{class:M(["h-6 w-6",c(d)])},null,8,["class"]))],2)):y("",!0),e("div",ne,[s.title?(i(),r("h3",ae,u(s.title),1)):y("",!0),e("div",ie,[z(a.$slots,"default",{},()=>[s.message?(i(),r("p",re,u(s.message),1)):y("",!0)],!0)])])]),e("div",le,[z(a.$slots,"actions",{},()=>[s.showConfirm?(i(),r("button",{key:0,type:"button",disabled:s.loading,class:M(["inline-flex w-full justify-center rounded-md px-3 py-2 text-sm font-semibold text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 sm:w-auto transition-colors",c(C)]),onClick:o[0]||(o[0]=x=>a.$emit("confirm"))},[s.loading?(i(),r("svg",de,[...o[3]||(o[3]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):y("",!0),b(" "+u(s.loading?s.loadingText:s.confirmText),1)],10,ce)):y("",!0),s.showCancel?(i(),r("button",{key:1,type:"button",disabled:s.loading,class:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 sm:mt-0 sm:w-auto transition-colors disabled:opacity-50",onClick:o[1]||(o[1]=x=>a.$emit("cancel"))},u(s.cancelText),9,ue)):y("",!0)],!0)])])):y("",!0)]),_:3})])])):y("",!0)]),_:3})]))}},fe=U(me,[["__scopeId","data-v-458d61e8"]]),ge=()=>{const{$supabase:s}=R();return{testConnection:async()=>{try{console.log("üîÑ Testando conex√£o com Supabase...");const n=G();console.log("‚öôÔ∏è Configura√ß√µes do runtime:",{supabaseUrl:n.public.supabaseUrl?"Configurado ‚úÖ":"N√£o configurado ‚ùå",supabaseKey:n.public.supabaseKey?"Configurado ‚úÖ":"N√£o configurado ‚ùå"}),console.log("üîó Supabase client:",s);const{data:g,error:d}=await s.from("funcionarios").select("count",{count:"exact",head:!0});return d?(console.error("‚ùå Erro na conex√£o:",d),console.error("‚ùå Detalhes completos do erro:",{message:d.message,details:d.details,hint:d.hint,code:d.code}),{success:!1,error:d.message}):(console.log("‚úÖ Conex√£o com Supabase OK!"),console.log(`üìä Total de funcion√°rios na tabela: ${g}`),{success:!0,count:g})}catch(n){return console.error("‚ùå Erro inesperado:",n),{success:!1,error:"Erro inesperado na conex√£o"}}},testAuth:async()=>{try{console.log("üîÑ Testando autentica√ß√£o...");const{data:{session:n}}=await s.auth.getSession();return n?.user?(console.log("‚úÖ Usu√°rio autenticado:",n.user.email),{success:!0,user:n.user}):(console.log("‚ö†Ô∏è Nenhum usu√°rio autenticado"),{success:!1,error:"Usu√°rio n√£o autenticado"})}catch(n){return console.error("‚ùå Erro na verifica√ß√£o de autentica√ß√£o:",n),{success:!1,error:"Erro na verifica√ß√£o de autentica√ß√£o"}}}}},pe={class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},xe={class:"bg-gray-50 px-6 py-4 border-b border-gray-200"},ye={class:"flex items-center justify-between"},ve={class:"text-sm text-gray-600 mt-1"},he={key:0,class:"px-6 py-12 text-center"},be={key:1,class:"px-6 py-12 text-center"},we={class:"text-gray-600 text-sm mb-4"},ke={key:2,class:"px-6 py-12 text-center"},Ce={key:3,class:"overflow-x-auto"},_e={class:"min-w-full divide-y divide-gray-200"},$e={class:"bg-white divide-y divide-gray-200"},Ee={class:"px-6 py-4 whitespace-nowrap"},Me={class:"flex items-center"},je={class:"flex-shrink-0 h-10 w-10"},Se={class:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center"},Be={class:"text-sm font-medium text-blue-600"},Te={class:"ml-4"},ze={class:"text-sm font-medium text-gray-900"},Ve={class:"px-6 py-4 whitespace-nowrap"},Ie={class:"text-sm text-gray-900"},Ne={class:"px-6 py-4 whitespace-nowrap"},Ae={key:0,class:"text-sm text-gray-900"},He={key:1,class:"text-sm text-gray-400 italic"},Fe={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Le={class:"flex items-center gap-2 justify-end"},Oe=["onClick"],Ue=J({__name:"FuncionarioTabela",setup(s){const{funcionarios:p,loading:l,error:n,fetchFuncionarios:g,deletarFuncionario:d}=Z(),{testConnection:C,testAuth:_}=ge(),{notifications:h}=ee();I(async()=>{try{await _(),await C(),g()}catch(m){console.error("Erro ao inicializar componente:",m)}});const a=()=>{g()},o=j(!1),x=j(null),$=j(!1),N=m=>{if(!m)return"";const t=m.trim().split(" ").filter(E=>E.length>0);return t.length===0?"":t.length===1?t[0].substring(0,2).toUpperCase():(t[0].charAt(0)+t[t.length-1].charAt(0)).toUpperCase()},A=m=>{x.value=m,o.value=!0},H=async()=>{if(x.value)try{$.value=!0,(await d(x.value.id)).success?(h.funcionario.excluido(),o.value=!1,x.value=null):h.funcionario.erroExcluir()}catch(m){console.error("Erro ao excluir funcion√°rio:",m),h.funcionario.erroExcluir()}finally{$.value=!1}},F=()=>{o.value=!1,x.value=null};return(m,t)=>{const E=O,L=fe;return i(),r("div",pe,[e("div",xe,[e("div",ye,[e("div",null,[t[1]||(t[1]=e("h2",{class:"text-lg font-semibold text-gray-900"},"Lista de Funcion√°rios",-1)),e("p",ve,u(c(p).length)+" funcion√°rio(s) encontrado(s) ",1)]),t[2]||(t[2]=e("div",{class:"text-sm text-gray-500"},[e("span",{class:"inline-flex items-center"},[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"})]),b(" Equipe ")])],-1))])]),c(l)?(i(),r("div",he,[...t[3]||(t[3]=[V('<div class="inline-flex items-center justify-center w-12 h-12 bg-blue-100 rounded-full mb-4"><svg class="animate-spin w-6 h-6 text-blue-600" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div><p class="text-gray-600">Carregando funcion√°rios...</p>',2)])])):c(n)?(i(),r("div",be,[t[5]||(t[5]=e("div",{class:"inline-flex items-center justify-center w-12 h-12 bg-red-100 rounded-full mb-4"},[e("svg",{class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t[6]||(t[6]=e("p",{class:"text-red-600 font-medium mb-2"},"Erro ao carregar funcion√°rios",-1)),e("p",we,u(c(n)),1),e("button",{onClick:a,class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[...t[4]||(t[4]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),b(" Tentar Novamente ",-1)])])])):c(p).length===0?(i(),r("div",ke,[...t[7]||(t[7]=[V('<div class="inline-flex items-center justify-center w-12 h-12 bg-gray-100 rounded-full mb-4"><svg class="w-6 h-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></div><p class="text-gray-600 font-medium mb-2">Nenhum funcion√°rio encontrado</p><p class="text-gray-500 text-sm">Adicione funcion√°rios ao sistema para v√™-los aqui.</p>',3)])])):(i(),r("div",Ce,[e("table",_e,[t[10]||(t[10]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Nome "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Cargo "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," E-mail "),e("th",{scope:"col",class:"relative px-6 py-3"},[e("span",{class:"sr-only"},"A√ß√µes")])])],-1)),e("tbody",$e,[(i(!0),r(Q,null,W(c(p),f=>(i(),r("tr",{key:f.id,class:"hover:bg-gray-50 transition-colors duration-200"},[e("td",Ee,[e("div",Me,[e("div",je,[e("div",Se,[e("span",Be,u(N(f.nome)),1)])]),e("div",Te,[e("div",ze,u(f.nome),1)])])]),e("td",Ve,[e("div",Ie,u(f.cargo),1)]),e("td",Ne,[f.email?(i(),r("div",Ae,u(f.email),1)):(i(),r("div",He," Email n√£o informado "))]),e("td",Fe,[e("div",Le,[w(E,{to:`/funcionario/${f.id}`,class:"inline-flex items-center px-3 py-2 text-sm font-medium text-primary-600 bg-primary-50 border border-primary-200 rounded-md hover:bg-primary-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors"},{default:S(()=>[...t[8]||(t[8]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),b(" Editar ",-1)])]),_:1},8,["to"]),e("button",{onClick:Qe=>A(f),class:"inline-flex items-center px-3 py-2 text-sm font-medium text-red-600 bg-red-50 border border-red-200 rounded-md hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors"},[...t[9]||(t[9]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),b(" Excluir ",-1)])],8,Oe)])])]))),128))])])])),w(L,{modelValue:c(o),"onUpdate:modelValue":t[0]||(t[0]=f=>X(o)?o.value=f:null),type:"danger",title:"Confirmar Exclus√£o",message:`Tem certeza que deseja excluir o funcion√°rio ${c(x)?.nome}? Esta a√ß√£o n√£o pode ser desfeita.`,"confirm-text":"Excluir","cancel-text":"Cancelar",loading:c($),"loading-text":"Excluindo...",onConfirm:H,onCancel:F},null,8,["modelValue","message","loading"])])}}}),qe=Object.assign(Ue,{__name:"FuncionarioTabela"}),De={class:"bg-gray-50 min-h-screen"},Ke={class:"container mx-auto px-4 py-8"},Pe={class:"mb-8"},Re={class:"flex items-center justify-between"},Ge={class:"flex items-center space-x-4"},Je={class:"text-sm text-gray-500"},tt={__name:"index",setup(s){Y({title:"Sistema Cadastro - P√°gina Inicial",meta:[{name:"description",content:"Sistema SaaS de cadastro moderno e eficiente para sua empresa"}]});const{user:p}=te();return(l,n)=>{const g=qe;return i(),r("div",De,[e("div",Ke,[e("div",Pe,[e("div",Re,[n[0]||(n[0]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Sistema Cadastro"),e("p",{class:"text-gray-600 mt-1"},"Sistema moderno e eficiente para gerenciamento de cadastros e dados.")],-1)),e("div",Ge,[e("span",Je," Ol√°, "+u(c(p)?.email),1)])])]),w(g)])])}}};export{tt as default};
