import{_ as M}from"./CP_9KE0U.js";import{_ as N}from"./DRBqwlh2.js";import{_ as F,r as p,H as S,c as u,o as m,a as o,d as v,t as _,p as z,D as b,G as x,g as t,b as y,h as $,I,B as j,f as A,u as B,k as R,w as E}from"./71iuM9A_.js";import{u as V,a as D}from"./Zb9bAkV2.js";import"./-LzsfN83.js";const U={class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},q={class:"bg-gray-50 px-6 py-4 border-b border-gray-200"},G={class:"flex items-center justify-between"},P={class:"text-sm text-gray-500"},H={class:"inline-flex items-center"},T={class:"p-6"},O={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},L={class:"lg:col-span-2"},J={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},K={class:"relative"},Q={class:"flex flex-col sm:flex-row gap-4 pt-6 border-t border-gray-200"},W=["disabled"],X={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Y=["disabled"],Z={__name:"FormFuncionarioEdicao",props:{funcionario:{type:Object,required:!0}},emits:["funcionario-editado","cancelar"],setup(w,{emit:h}){const s=w,g=h,r=p({nome:"",cargo:"",email:null,endereco:null,salario:null}),a=p(!1),c=["Gestor de Tráfego","Analista de Mídia Paga","Copywriter","Designer Gráfico / Motion Designer","Closer","SDR","Social Media","Especialista em Funil / CRO","Analista de Dados / BI","Gestor de Projetos / Account Manager"],{notifications:i}=D(),{atualizarFuncionario:k}=V();S(()=>{s.funcionario&&(r.value={nome:s.funcionario.nome||"",cargo:s.funcionario.cargo||"",email:s.funcionario.email||null,endereco:s.funcionario.endereco||null,salario:s.funcionario.salario||null})});const C=async()=>{try{if(a.value=!0,!r.value.nome.trim()){i.funcionario.dadosInvalidos();return}if(!r.value.cargo.trim()){i.funcionario.dadosInvalidos();return}if(!r.value.salario||isNaN(Number(r.value.salario))||Number(r.value.salario)<=0){i.funcionario.dadosInvalidos();return}const n={nome:r.value.nome.trim(),cargo:r.value.cargo.trim(),email:r.value.email?.trim()||null,endereco:r.value.endereco?.trim()||null,salario:parseFloat(r.value.salario.toString())};if((await k(s.funcionario.id,n)).success){i.funcionario.atualizado();const f={id:s.funcionario.id,...n};g("funcionario-editado",f)}else i.funcionario.erroAtualizar()}catch(n){console.error("Erro ao editar funcionário:",n),i.funcionario.erroAtualizar()}finally{a.value=!1}},l=()=>{g("cancelar")};return(n,e)=>{const f=N;return m(),u("div",U,[o("div",q,[o("div",G,[e[6]||(e[6]=o("div",null,[o("h2",{class:"text-lg font-semibold text-gray-900"}," Editar Funcionário "),o("p",{class:"text-sm text-gray-600 mt-1"}," Altere as informações do funcionário ")],-1)),o("div",P,[o("span",H,[e[5]||(e[5]=o("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),v(" ID: "+_(w.funcionario.id),1)])])])]),o("div",T,[o("form",{onSubmit:z(C,["prevent"]),class:"space-y-6"},[o("div",O,[o("div",L,[e[7]||(e[7]=o("label",{for:"nome",class:"block text-sm font-medium text-gray-700 mb-2"}," Nome Completo * ",-1)),b(o("input",{id:"nome","onUpdate:modelValue":e[0]||(e[0]=d=>t(r).nome=d),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors",placeholder:"Digite o nome completo"},null,512),[[x,t(r).nome]])]),o("div",null,[y(f,{modelValue:t(r).cargo,"onUpdate:modelValue":e[1]||(e[1]=d=>t(r).cargo=d),options:c,label:"Cargo *",placeholder:"Selecione o cargo",required:""},null,8,["modelValue"])])]),o("div",J,[o("div",null,[e[8]||(e[8]=o("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-2"}," E-mail ",-1)),b(o("input",{id:"email","onUpdate:modelValue":e[2]||(e[2]=d=>t(r).email=d),type:"email",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors",placeholder:"exemplo@email.com"},null,512),[[x,t(r).email]])]),o("div",null,[e[10]||(e[10]=o("label",{for:"salario",class:"block text-sm font-medium text-gray-700 mb-2"}," Salário * ",-1)),o("div",K,[e[9]||(e[9]=o("span",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm"}," R$ ",-1)),b(o("input",{id:"salario","onUpdate:modelValue":e[3]||(e[3]=d=>t(r).salario=d),type:"number",step:"0.01",min:"0",required:"",class:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors",placeholder:"0,00"},null,512),[[x,t(r).salario]])])])]),o("div",null,[e[11]||(e[11]=o("label",{for:"endereco",class:"block text-sm font-medium text-gray-700 mb-2"}," Endereço Completo ",-1)),b(o("textarea",{id:"endereco","onUpdate:modelValue":e[4]||(e[4]=d=>t(r).endereco=d),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors resize-none",placeholder:"Rua, número, bairro, cidade - CEP"},null,512),[[x,t(r).endereco]])]),o("div",Q,[o("button",{type:"submit",disabled:t(a),class:"flex-1 sm:flex-none inline-flex items-center justify-center px-6 py-3 bg-primary-600 text-white text-sm font-medium rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[t(a)?(m(),u("svg",X,[...e[12]||(e[12]=[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):$("",!0),v(" "+_(t(a)?"Salvando...":"Salvar Alterações"),1)],8,W),o("button",{type:"button",onClick:l,disabled:t(a),class:"flex-1 sm:flex-none inline-flex items-center justify-center px-6 py-3 bg-white text-gray-700 text-sm font-medium border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," Cancelar ",8,Y)])],32)])])}}},oo=F(Z,[["__scopeId","data-v-e6d264c0"]]),eo={class:"bg-gray-50 min-h-screen"},ro={class:"container mx-auto px-4 py-8"},no={class:"mb-8"},to={class:"flex items-center justify-between"},io={class:"text-gray-600 mt-1"},so={class:"flex items-center space-x-4"},ao={key:0,class:"text-center py-8"},lo={key:1,class:"text-center py-8"},co={class:"bg-red-50 border border-red-200 rounded-lg p-6"},uo={class:"text-red-600 mb-6"},mo={key:2},fo={__name:"[id]",setup(w){const h=I(),s=j(),{buscarFuncionarioPorId:g}=V(),{showError:r}=D(),a=p(!1),c=p(null),i=p(null);A(async()=>{try{a.value=!0,c.value=null;const l=parseInt(h.params.id);if(isNaN(l))throw new Error("ID do funcionário inválido");const n=await g(l);n?i.value=n:c.value="Funcionário não encontrado"}catch(l){c.value=l.message||"Erro ao carregar funcionário",console.error("Erro ao buscar funcionário:",l),r("Erro ao carregar funcionário")}finally{a.value=!1}});const k=l=>{console.log("Funcionário editado:",l),s.push("/")},C=()=>{s.push("/")};return B({title:R(()=>i.value?`Editar ${i.value.nome} - Sistema Cadastro`:"Editar Funcionário - Sistema Cadastro")}),(l,n)=>{const e=M,f=oo;return m(),u("div",eo,[o("div",ro,[o("div",no,[o("div",to,[o("div",null,[n[0]||(n[0]=o("h1",{class:"text-2xl font-bold text-gray-900"},"Editar Funcionário",-1)),o("p",io,_(t(i)?`Editando: ${t(i).nome}`:"Carregando funcionário..."),1)]),o("div",so,[y(e,{to:"/",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors"},{default:E(()=>[...n[1]||(n[1]=[o("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),v(" Voltar ",-1)])]),_:1})])])]),t(a)?(m(),u("div",ao,[...n[2]||(n[2]=[o("div",{class:"w-8 h-8 border-4 border-primary-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"},null,-1),o("p",{class:"text-gray-600"},"Carregando dados do funcionário...",-1)])])):t(c)?(m(),u("div",lo,[o("div",co,[n[4]||(n[4]=o("svg",{class:"w-12 h-12 text-red-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),n[5]||(n[5]=o("h3",{class:"text-lg font-medium text-red-900 mb-2"},"Funcionário não encontrado",-1)),o("p",uo,_(t(c)),1),y(e,{to:"/",class:"inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors"},{default:E(()=>[...n[3]||(n[3]=[v(" Voltar para início ",-1)])]),_:1})])])):t(i)?(m(),u("div",mo,[y(f,{funcionario:t(i),onFuncionarioEditado:k,onCancelar:C},null,8,["funcionario"])])):$("",!0)])])}}},vo=F(fo,[["__scopeId","data-v-aad2145a"]]);export{vo as default};
